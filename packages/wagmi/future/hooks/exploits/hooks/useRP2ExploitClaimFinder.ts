import { Address } from 'wagmi'
import { RP2MerkleTree, RP2MerkleTreeSchema } from '../constants'
import { useMemo } from 'react'
import { ChainId } from '@sushiswap/chain'
import { isRP2ClaimChainId } from '../types'

interface UseRP2ExploitCheck {
  chainId: ChainId | undefined
  account: Address | undefined
}

export const useRP2ExploitClaimFinder = ({ account, chainId }: UseRP2ExploitCheck) => {
  return useMemo(() => {
    if (!chainId || !isRP2ClaimChainId(chainId)) return []
    return RP2MerkleTreeSchema.parse(RP2MerkleTree[chainId]).claims.filter(
      (el) => el.user.toLowerCase() === account?.toLowerCase()
    )
  }, [account, chainId])
}
